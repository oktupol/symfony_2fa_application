{% extends '::base.html.twig' %}

{% block base_html_body_header_inner %}
    <h1>Account - U2F Registration</h1>
{% endblock %}

{% block base_html_body_content_inner %}
    Challenge:
    <pre>
        {{ challenge | json_encode }}
    </pre><br><br>
    Signs:
    <pre>
        {{ signs | json_encode }}
    </pre>
{% endblock %}

{% block base_html_body_javascripts %}
    <script src="{{ asset('assets/src/js/u2f-api.js') }}" type="text/javascript"></script>
    <script type="text/javascript">
        (function (u2f) {
            var challenge = {{ challenge | json_encode | raw }},
                    appId = '{{ appId | raw }}',
                    signs = {{ signs | json_encode | raw }};

            u2f.register(appId, [challenge], [], function (deviceResponse) {
                console.log(deviceResponse);
            });
        })(u2f);
    </script>
{% endblock %}
